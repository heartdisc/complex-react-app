"use strict";(self.webpackChunkcomplex_react_app=self.webpackChunkcomplex_react_app||[]).push([[300],{300:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var l=a(540),s=a(569),n=a(83),o=a(343),r=a(767),c=a(976),i=a(149),m=a(598),u=a(663),d=a(953),p=a(306);function f(){const e=(0,r.Zp)(),{id:t}=(0,r.g)(),a=(0,l.useContext)(o.A),f=(0,l.useContext)(p.A),[E,h]=(0,l.useState)(!0),[g,y]=(0,l.useState)([]);if((0,l.useEffect)((()=>{const e=new AbortController;return async function(){try{const a=await n.A.get(`/post/${t}`,{signal:e.signal});h(!1),y(a.data)}catch(e){console.log("There was a problem in ProfilePost or the request was cancelled"),e.response&&console.log(e.response)}}(),()=>{e.abort()}}),[t]),!E&&!g)return l.createElement(d.A,null);if(E)return l.createElement(s.A,{title:"Loading"},l.createElement(i.A,null));const N=new Date(g.createdDate),w=`${N.getDate()}/${N.getMonth()+1}/${N.getFullYear()}`;return l.createElement(s.A,{title:g.title},l.createElement("div",{className:"d-flex justify-content-between"},l.createElement("h2",null,g.title),a.loggedIn&&a.user.username===g.author.username&&l.createElement("span",{className:"pt-2"},l.createElement(c.N_,{to:`/posts/${g._id}/edit`,"data-tooltip-content":"Edit","data-tooltip-id":"edit",className:"text-primary mr-2"},l.createElement("i",{className:"fas fa-edit"})),l.createElement(u.m_,{id:"edit",className:"custom-tooltip"})," ",l.createElement("a",{onClick:async function(){if(window.confirm("Do you really want to delete this post?"))try{"Success"==(await n.A.delete(`/post/${t}`,{data:{token:a.user.token}})).data&&(f({type:"flashMessages",value:"Post was successfully deleted."}),e(`/profile/${a.user.username}`))}catch(e){console.log("something error")}},"data-tooltip-content":"Delete","data-tooltip-id":"delete",className:"delete-post-button text-danger"},l.createElement("i",{className:"fas fa-trash"})),l.createElement(u.m_,{id:"delete",className:"custom-tooltip"}))),l.createElement("p",{className:"text-muted small mb-4"},l.createElement(c.N_,{to:`/profile/${g.author.username}`},l.createElement("img",{className:"avatar-tiny",src:g.author.avatar})),"Posted by ",l.createElement(c.N_,{to:`/profile/${g.author.username}`},g.author.username)," on ",w),l.createElement("div",{className:"body-content"},l.createElement(m.o,{children:g.body})))}}}]);